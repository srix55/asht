<!doctype html><html lang=en-us dir=ltr><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="
  Test Exception
  #

expect(() => range(5, 5), throwsException)

expect(() => range(5, 10), returnsNormally);

expect(() => range(5, 3), 
    throwsA(predicate((e) => e is ArgumentError 
    && e.message == 'start must be less than stop')));

  Unit test
  #

@Tags(['unit'])
import 'package:flutter_test/flutter_test.dart';
import 'package:test_config/test_config.dart';

void main() {
  late Isar isar;
  late MyRepo repo;
  
  setUpAll(() {
    isar = SignageDb.getIsar();
  });
  
  setUp(() {
    repo = getMyRepo();
  });
  
  test('should pass', () {
    expect(true, true);
  });
  
  tearDown(() {
  });
  
  tearDownAll(() {
  });
}

  RepoImpl Template
  #

@Tags(['integration'])
import 'package:flutter_test/flutter_test.dart';
import 'package:player_repos/src/player_repos/registration/get_client_info/get_client_info_repo_impl.dart';
import 'package:player_usecases/player_usecases.dart';
import 'package:tuxkit/tuxkit.dart';

void main() {
  test('main fetch', () async {
    var repo = GetClientInfoRepoImpl();
    expect(() => repo.getClientInfo(Tracer.fake(), 'ggs8892'),
      throwsA(predicate((e) => e is NoSuchAuthorizedPlayerException)));
    await Future.delayed(const Duration(seconds: 5));
  });
}

  Golden Tests
  #

@Tags(['golden-unit'])
import 'package:golden_toolkit/golden_toolkit.dart';

// flutter test --update-goldens test/src/widgets/basic/search_bar/search_bar_test.dart
void main() {
  setUpAll(() async {
    TestConfig.setupRepoFactories();
    await loadFonts();
  });
  
  testGoldens('search bar golden tests', (tester) async {
    var searchbarKey = ValueKey('searchBarKey-goldenBasicTest');
    final tuxApp = TestUtil.getTuxApp(SearchBar(key: searchbarKey, onSearch: (){}));
    final builder = DeviceBuilder()
      ..overrideDevicesForAllScenarios(devices: [g.Device.phone])
      ..addScenario(widget: tuxApp, name: 'Basic - searchBar');
    await tester.pumpDeviceBuilder(builder);
    var util = TestUtilWidgetUnit(tester);
    await screenMatchesGolden(tester, 'search_bar_basic');
    await util.darkModeSwitch('search_bar_basic_dark');
    await util.arabicSwitch('search_bar_basic_ar');
    await util.switchLang(lang: de, filename: 'search_bar_basic_de');
    await util.switchZoom(level: '1.5', filename: 'search_bar_zoom_1_5');

    var tField = find.byKey(searchbarKey);
    expect(tField, findsOneWidget);
    // await tester.showKeyboard(tField); // won't show on desktop test
    await tester.enterText(tField, 'hello pal');
    await tester.pump();
    await g.screenMatchesGolden(tester, 'search_bar_basic_open_keyboard');
  });
}  
"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="http://localhost:1313/docs/snippets/dart/"><meta property="og:site_name" content="Signage Docs"><meta property="og:title" content="Dart"><meta property="og:description" content="Test Exception # expect(() => range(5, 5), throwsException) expect(() => range(5, 10), returnsNormally); expect(() => range(5, 3), throwsA(predicate((e) => e is ArgumentError && e.message == 'start must be less than stop'))); Unit test # @Tags(['unit']) import 'package:flutter_test/flutter_test.dart'; import 'package:test_config/test_config.dart'; void main() { late Isar isar; late MyRepo repo; setUpAll(() { isar = SignageDb.getIsar(); }); setUp(() { repo = getMyRepo(); }); test('should pass', () { expect(true, true); }); tearDown(() { }); tearDownAll(() { }); } RepoImpl Template # @Tags(['integration']) import 'package:flutter_test/flutter_test.dart'; import 'package:player_repos/src/player_repos/registration/get_client_info/get_client_info_repo_impl.dart'; import 'package:player_usecases/player_usecases.dart'; import 'package:tuxkit/tuxkit.dart'; void main() { test('main fetch', () async { var repo = GetClientInfoRepoImpl(); expect(() => repo.getClientInfo(Tracer.fake(), 'ggs8892'), throwsA(predicate((e) => e is NoSuchAuthorizedPlayerException))); await Future.delayed(const Duration(seconds: 5)); }); } Golden Tests # @Tags(['golden-unit']) import 'package:golden_toolkit/golden_toolkit.dart'; // flutter test --update-goldens test/src/widgets/basic/search_bar/search_bar_test.dart void main() { setUpAll(() async { TestConfig.setupRepoFactories(); await loadFonts(); }); testGoldens('search bar golden tests', (tester) async { var searchbarKey = ValueKey('searchBarKey-goldenBasicTest'); final tuxApp = TestUtil.getTuxApp(SearchBar(key: searchbarKey, onSearch: (){})); final builder = DeviceBuilder() ..overrideDevicesForAllScenarios(devices: [g.Device.phone]) ..addScenario(widget: tuxApp, name: 'Basic - searchBar'); await tester.pumpDeviceBuilder(builder); var util = TestUtilWidgetUnit(tester); await screenMatchesGolden(tester, 'search_bar_basic'); await util.darkModeSwitch('search_bar_basic_dark'); await util.arabicSwitch('search_bar_basic_ar'); await util.switchLang(lang: de, filename: 'search_bar_basic_de'); await util.switchZoom(level: '1.5', filename: 'search_bar_zoom_1_5'); var tField = find.byKey(searchbarKey); expect(tField, findsOneWidget); // await tester.showKeyboard(tField); // won't show on desktop test await tester.enterText(tField, 'hello pal'); await tester.pump(); await g.screenMatchesGolden(tester, 'search_bar_basic_open_keyboard'); }); }"><meta property="og:locale" content="en_us"><meta property="og:type" content="website"><title>Dart | Signage Docs</title><link rel=icon href=/favicon.png><link rel=manifest href=/manifest.json><link rel=canonical href=http://localhost:1313/docs/snippets/dart/><link rel=stylesheet href=/book.min.a7616cf2799b58bddffce9438e31fdbfc6393687cfc0950a4a17cd1cce7e35f6.css integrity="sha256-p2Fs8nmbWL3f/OlDjjH9v8Y5NofPwJUKShfNHM5+NfY=" crossorigin=anonymous><script defer src=/fuse.min.js></script><script defer src=/en.search.min.8055c20c11bab2948f35a214cd3b34d0049bc9809df8d235cf0b2e0a5e3b3140.js integrity="sha256-gFXCDBG6spSPNaIUzTs00ASbyYCd+NI1zwsuCl47MUA=" crossorigin=anonymous></script><link rel=alternate type=application/rss+xml href=http://localhost:1313/docs/snippets/dart/index.xml title="Signage Docs"></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>Signage Docs</span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul><li><input type=checkbox id=section-5fdf93cd314ec47df39ee998b89605b2 class=toggle>
<label for=section-5fdf93cd314ec47df39ee998b89605b2 class="flex justify-between"><a href=/docs/caching/>Caching</a></label><ul><li><a href=/docs/caching/strategy/>Strategy</a><ul></ul></li><li><a href=/docs/caching/data-structures/>Data Structures</a><ul></ul></li><li><a href=/docs/caching/scenarios/>Scenarios</a><ul></ul></li></ul></li><li><input type=checkbox id=section-4e5caaf6365b6353a122fd9e35c00b08 class=toggle>
<label for=section-4e5caaf6365b6353a122fd9e35c00b08 class="flex justify-between"><a href=/docs/dev/>Dev</a></label><ul><li><input type=checkbox id=section-93509623b841973ade448228f6a7245a class=toggle>
<label for=section-93509623b841973ade448228f6a7245a class="flex justify-between"><a href=/docs/dev/checklists/>Checklists</a></label><ul><li><input type=checkbox id=section-cd85b26f7f821c87127cc7c5ab2be114 class=toggle>
<label for=section-cd85b26f7f821c87127cc7c5ab2be114 class="flex justify-between"><a href=/docs/dev/checklists/flutter_ui/>Flutter UI</a></label><ul></ul></li></ul></li><li><input type=checkbox id=section-342701e3704fa08e1bf5178f22301bff class=toggle>
<label for=section-342701e3704fa08e1bf5178f22301bff class="flex justify-between"><a href=/docs/dev/gcp/>GCP Deploy</a></label><ul></ul></li><li><input type=checkbox id=section-62f6752f338b4e8972e68d919e388f1b class=toggle>
<label for=section-62f6752f338b4e8972e68d919e388f1b class="flex justify-between"><a href=/docs/dev/setup/>Local Setup</a></label><ul></ul></li><li><input type=checkbox id=section-8a7fd608f954780ffa4e272058ad1f8f class=toggle>
<label for=section-8a7fd608f954780ffa4e272058ad1f8f class="flex justify-between"><a href=/docs/dev/setup_fedora/>Local Setup (Fedora)</a></label><ul></ul></li><li><input type=checkbox id=section-a4a95fe5b98a6ee596e16de8c518475a class=toggle>
<label for=section-a4a95fe5b98a6ee596e16de8c518475a class="flex justify-between"><a href=/docs/dev/mac/>Mac</a></label><ul></ul></li></ul></li><li><input type=checkbox id=section-20d497b48986a632cbad2fbd9940c776 class=toggle>
<label for=section-20d497b48986a632cbad2fbd9940c776 class="flex justify-between"><a href=/docs/manual/>Dev Manual</a></label><ul></ul></li><li><input type=checkbox id=section-2f9d02b5146d32013b75800d20839f0c class=toggle>
<label for=section-2f9d02b5146d32013b75800d20839f0c class="flex justify-between"><a href=/docs/player_registration/>Player Registration</a></label><ul></ul></li><li><input type=checkbox id=section-401ec0f4fea4e1b33d16a959f93c7b54 class=toggle>
<label for=section-401ec0f4fea4e1b33d16a959f93c7b54 class="flex justify-between"><a href=/docs/cheats/>Cheats</a></label><ul><li><a href=/docs/cheats/http/>Http</a><ul></ul></li></ul></li><li><input type=checkbox id=section-b439b1f12afb2bdb787d45ce1eefc920 class=toggle checked>
<label for=section-b439b1f12afb2bdb787d45ce1eefc920 class="flex justify-between"><a href=/docs/snippets/>Snippets</a></label><ul><li><a href=/docs/snippets/jpa/>JPA</a><ul></ul></li><li><a href=/docs/snippets/rest/>Rest</a><ul></ul></li><li><a href=/docs/snippets/dart/ class=active>Dart</a><ul></ul></li></ul></li></ul><ul><li><a href=/posts/>Blog</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label><h3>Dart</h3><label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><ul><li><a href=#test-exception>Test Exception</a></li><li><a href=#unit-test>Unit test</a></li><li><a href=#repoimpl-template>RepoImpl Template</a></li><li><a href=#golden-tests>Golden Tests</a></li></ul></li></ul></nav></aside></header><article class="markdown book-article"><h2 id=test-exception>Test Exception
<a class=anchor href=#test-exception>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-dart data-lang=dart><span style=display:flex><span>expect(() <span style=color:#f92672>=&gt;</span> range(<span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>5</span>), throwsException)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>expect(() <span style=color:#f92672>=&gt;</span> range(<span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>10</span>), returnsNormally);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>expect(() <span style=color:#f92672>=&gt;</span> range(<span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>3</span>), 
</span></span><span style=display:flex><span>    throwsA(predicate((e) <span style=color:#f92672>=&gt;</span> e <span style=color:#66d9ef>is</span> ArgumentError 
</span></span><span style=display:flex><span>    <span style=color:#f92672>&amp;&amp;</span> e.message <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;start must be less than stop&#39;</span>)));
</span></span></code></pre></div><h2 id=unit-test>Unit test
<a class=anchor href=#unit-test>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-dart data-lang=dart><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>@</span>Tags([<span style=color:#e6db74>&#39;unit&#39;</span>])
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#e6db74>&#39;package:flutter_test/flutter_test.dart&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#e6db74>&#39;package:test_config/test_config.dart&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> main() {
</span></span><span style=display:flex><span>  late Isar isar;
</span></span><span style=display:flex><span>  late MyRepo repo;
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  setUpAll(() {
</span></span><span style=display:flex><span>    isar <span style=color:#f92672>=</span> SignageDb.getIsar();
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  setUp(() {
</span></span><span style=display:flex><span>    repo <span style=color:#f92672>=</span> getMyRepo();
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  test(<span style=color:#e6db74>&#39;should pass&#39;</span>, () {
</span></span><span style=display:flex><span>    expect(<span style=color:#66d9ef>true</span>, <span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  tearDown(() {
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  tearDownAll(() {
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=repoimpl-template>RepoImpl Template
<a class=anchor href=#repoimpl-template>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-dart data-lang=dart><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>@</span>Tags([<span style=color:#e6db74>&#39;integration&#39;</span>])
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#e6db74>&#39;package:flutter_test/flutter_test.dart&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#e6db74>&#39;package:player_repos/src/player_repos/registration/get_client_info/get_client_info_repo_impl.dart&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#e6db74>&#39;package:player_usecases/player_usecases.dart&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#e6db74>&#39;package:tuxkit/tuxkit.dart&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> main() {
</span></span><span style=display:flex><span>  test(<span style=color:#e6db74>&#39;main fetch&#39;</span>, () <span style=color:#66d9ef>async</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> repo <span style=color:#f92672>=</span> GetClientInfoRepoImpl();
</span></span><span style=display:flex><span>    expect(() <span style=color:#f92672>=&gt;</span> repo.getClientInfo(Tracer.fake(), <span style=color:#e6db74>&#39;ggs8892&#39;</span>),
</span></span><span style=display:flex><span>      throwsA(predicate((e) <span style=color:#f92672>=&gt;</span> e <span style=color:#66d9ef>is</span> NoSuchAuthorizedPlayerException)));
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> Future.delayed(<span style=color:#66d9ef>const</span> Duration(seconds: <span style=color:#ae81ff>5</span>));
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=golden-tests>Golden Tests
<a class=anchor href=#golden-tests>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-dart data-lang=dart><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>@</span>Tags([<span style=color:#e6db74>&#39;golden-unit&#39;</span>])
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#e6db74>&#39;package:golden_toolkit/golden_toolkit.dart&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// flutter test --update-goldens test/src/widgets/basic/search_bar/search_bar_test.dart
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>void</span> main() {
</span></span><span style=display:flex><span>  setUpAll(() <span style=color:#66d9ef>async</span> {
</span></span><span style=display:flex><span>    TestConfig.setupRepoFactories();
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> loadFonts();
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  testGoldens(<span style=color:#e6db74>&#39;search bar golden tests&#39;</span>, (tester) <span style=color:#66d9ef>async</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> searchbarKey <span style=color:#f92672>=</span> ValueKey(<span style=color:#e6db74>&#39;searchBarKey-goldenBasicTest&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>final</span> tuxApp <span style=color:#f92672>=</span> TestUtil.getTuxApp(SearchBar(key: searchbarKey, onSearch: (){}));
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>final</span> builder <span style=color:#f92672>=</span> DeviceBuilder()
</span></span><span style=display:flex><span>      ..overrideDevicesForAllScenarios(devices: [g.Device.phone])
</span></span><span style=display:flex><span>      ..addScenario(widget: tuxApp, name: <span style=color:#e6db74>&#39;Basic - searchBar&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> tester.pumpDeviceBuilder(builder);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> util <span style=color:#f92672>=</span> TestUtilWidgetUnit(tester);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> screenMatchesGolden(tester, <span style=color:#e6db74>&#39;search_bar_basic&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> util.darkModeSwitch(<span style=color:#e6db74>&#39;search_bar_basic_dark&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> util.arabicSwitch(<span style=color:#e6db74>&#39;search_bar_basic_ar&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> util.switchLang(lang: de, filename: <span style=color:#e6db74>&#39;search_bar_basic_de&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> util.switchZoom(level: <span style=color:#e6db74>&#39;1.5&#39;</span>, filename: <span style=color:#e6db74>&#39;search_bar_zoom_1_5&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> tField <span style=color:#f92672>=</span> find.byKey(searchbarKey);
</span></span><span style=display:flex><span>    expect(tField, findsOneWidget);
</span></span><span style=display:flex><span>    <span style=color:#75715e>// await tester.showKeyboard(tField); // won&#39;t show on desktop test
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>await</span> tester.enterText(tField, <span style=color:#e6db74>&#39;hello pal&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> tester.pump();
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> g.screenMatchesGolden(tester, <span style=color:#e6db74>&#39;search_bar_basic_open_keyboard&#39;</span>);
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>}  
</span></span></code></pre></div></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><ul><li><a href=#test-exception>Test Exception</a></li><li><a href=#unit-test>Unit test</a></li><li><a href=#repoimpl-template>RepoImpl Template</a></li><li><a href=#golden-tests>Golden Tests</a></li></ul></li></ul></nav></div></aside></main></body></html>